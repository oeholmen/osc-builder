<!DOCTYPE html>
<html lang="en">
<head>
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <title>OSC</title>
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.bunny.net">
    <link href="https://fonts.bunny.net/css?family=figtree:400,600&display=swap" rel="stylesheet"/>
    <style>
        body {
            background-color: steelblue;
        }

        form {
            display: flex;
            flex: auto;
        }

        form input {
            margin: 0 .3rem;
            padding: .6rem;
            border: none;
        }

        #address {
            border-radius: 1rem;
        }

        #arg {
            cursor: pointer;
        }

        /********** Range Input Styles **********/
        /*Range Reset*/
        input[type="range"] {
            -webkit-appearance: none;
            appearance: none;
            background: transparent;
            cursor: pointer;
            width: 15rem;
        }

        /* Removes default focus */
        input[type="range"]:focus {
            outline: none;
        }

        /***** Chrome, Safari, Opera and Edge Chromium styles *****/
        /* slider track */
        input[type="range"]::-webkit-slider-runnable-track {
            background-color: #053a5f;
            border-radius: 0.5rem;
            height: 0.5rem;
        }

        /* slider thumb */
        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none; /* Override default look */
            appearance: none;
            margin-top: -12px; /* Centers thumb on the track */

            /*custom styles*/
            background-color: #5cd5eb;
            height: 2rem;
            width: 1rem;
        }

        input[type="range"]:focus::-webkit-slider-thumb {
            border: 1px solid #053a5f;
            outline: 3px solid #053a5f;
            outline-offset: 0.125rem;
        }

        /******** Firefox styles ********/
        /* slider track */
        input[type="range"]::-moz-range-track {
            background-color: #053a5f;
            border-radius: 0.5rem;
            height: 0.5rem;
        }

        /* slider thumb */
        input[type="range"]::-moz-range-thumb {
            border: none; /*Removes extra border that FF applies*/
            border-radius: 0; /*Removes default border-radius that FF applies*/

            /*custom styles*/
            background-color: #5cd5eb;
            height: 2rem;
            width: 1rem;
        }

        input[type="range"]:focus::-moz-range-thumb {
            border: 1px solid #053a5f;
            outline: 3px solid #053a5f;
            outline-offset: 0.125rem;
        }
    </style>
</head>
<body>
<div class="wrapper">
    <form id="form" action="/">
        <input id="address" type="text" size="60" autocomplete="off"
               value="/uvi/Part 0/Program/EventProcessor0/Cutoff"/>
        <input type="range" id="arg" min="0" max="1" step="0.01"/>
    </form>
</div>
<script type="text/javascript" src="/socket.io/socket.io.js"></script>
<script type="text/javascript">
    const socket = io();
    const form = document.getElementById('form');
    const address = document.getElementById('address');
    const arg = document.getElementById('arg');

    const sendOsc = () => {
        if (address.value) {
            socket.emit('message', address.value, parseFloat(arg.value));
        }
    }

    form.addEventListener('submit', (e) => {
        e.preventDefault();
        sendOsc();
    });

    arg.addEventListener('input', function () {
        sendOsc();
    });

    socket.on('connect', function () {
        // sends to socket.io server the host/port of oscServer and oscClient
        socket.emit('config',
            {
                server: {
                    port: 3333,
                    host: '127.0.0.1'
                },
                client: {
                    port: 3334,
                    host: '127.0.0.1'
                }
            }
        );
    });
</script>
</body>
</html>
